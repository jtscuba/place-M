// refresh 
var run_counter = 0;

setInterval(() => {
	
	console.log("Drawing in " + (sec--) + " seconds")


	
	}, 1e3);

// 
const modhash = window.reddit.modhash;

// Location constants
const x_max = 104;
const x_min = 70;

const y_min = 802;
const y_max = 827;

// Time constants
const five_minutes_in_ms = 300000;

const logo_colors = 
		[[8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8],
         [8,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13, 8],
         [8,13, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13, 8, 8, 8, 8,13, 8,13,13, 8,13,13,13,13, 8,13,13, 8, 8, 8,13,13,13, 8, 8,13,13,13, 8, 8,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13, 8,13, 8,13,13, 8,13,13,13,13, 8,13, 8,13,13, 8,13,13, 8,13,13, 8,13,13,13,13, 8,13, 8,13, 8],
         [8,13, 8,13,13, 8, 8, 8,13, 8,13,13, 8,13,13,13,13, 8,13,13, 8, 8, 8,13,13, 8,13,13, 8,13, 8, 8,13, 8,13, 8,13, 8],
         [8,13, 8,13,13,13,13, 8,13, 8,13,13, 8,13,13,13,13, 8,13, 8,13,13, 8,13,13, 8,13,13, 8,13, 8,13,13, 8,13, 8,13, 8],
         [8,13, 8,13, 8, 8, 8, 8,13, 8, 8, 8, 8,13, 8, 8, 8, 8,13,13, 8, 8, 8,13,13,13, 8, 8,13,13,13, 8, 8,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13, 8, 8, 8, 8,13,13,13,13,13,13, 8, 8, 8, 8,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13, 8, 8, 8, 8, 8,13,13,13,13, 8, 8, 8, 8, 8,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13,13, 8, 8, 8, 8, 8,13,13, 8, 8, 8, 8, 8,13,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13,13, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,13,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13,13, 8, 8, 8,13, 8, 8, 8, 8,13, 8, 8, 8,13,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13,13, 8, 8, 8,13,13, 8, 8,13,13, 8, 8, 8,13,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13, 8, 8, 8, 8, 8,13,13,13,13, 8, 8, 8, 8, 8,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13, 8, 8, 8, 8, 8,13,13,13,13, 8, 8, 8, 8, 8,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13, 8,13, 8],
         [8,13, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,13, 8],
         [8,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13, 8],
         [8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8]
];

const draw_pixel = () => {
   for (y = y_min; y <= y_max; y++) {
      for (x = x_min; x <= x_max; x++) {
         $.get("https://www.reddit.com/api/place/pixel.json?x=" + x + "&y=" + y)
         .then(res => {
            // Get the desired color
            const color = logo_colors[x - x_min][y - y_min]

            // check if the color is already correct
            if (res.color == color) {
               console.log("Skipping " + (x + ", " + y) + " because it's already correct");
            }
            else {
               // If not fix it
               console.log("Drawing at " + x + ", " + y + " (https://www.reddit.com/r/place/#x=" + x + "&y=" + y + ")");
               $.ajax({ url: "https://www.reddit.com/api/place/draw.json", type: "POST",
                   headers: { "x-modhash": modhash }, data: { x: x, y: y, color: color }
               })

               return;
            }

         })
         .fail(err => {
            console.log(err);
            return;
         })

         // rate limiting
         sleep(50);
      }
   }
}

const draw = setInterval(draw_pixel, 300000);


